---
name: prompt-quality-check
description: 프롬프트 품질을 100점 만점으로 검증 — 구조/내용/보안/호환성 4개 영역 평가
---

프롬프트의 품질을 100점 만점으로 검증하고 개선 제안을 제공합니다.

## 인자
$ARGUMENTS - 프롬프트 ID 또는 경로 (선택사항. 없으면 대화형으로 선택)

## 사용법
```
/prompt-quality-check security-review
/prompt-quality-check prompts/code-gen/react-component
/prompt-quality-check
```

## 실행 절차

### 0단계: 대상 프롬프트 확인

1. 인자가 프롬프트 ID인 경우: `prompts/*/` 하위에서 해당 ID 폴더 검색
2. 인자가 경로인 경우: 해당 경로의 `metadata.json`과 `prompt.md` 확인
3. 인자가 없는 경우: `prompts/` 하위의 모든 프롬프트를 나열하고 선택 요청
4. 대상 폴더에 `metadata.json`과 `prompt.md`가 모두 존재하는지 확인

### 1단계: 구조 검증 (25점)

메타데이터와 파일 구조의 정합성을 검사합니다.

| 항목 | 배점 | 검사 내용 |
|------|------|---------|
| JSON 유효성 | 5점 | `metadata.json`이 유효한 JSON인지 파싱 확인 |
| 필수 필드 | 8점 | 10개 필수 필드 존재 확인 (`id`, `title`, `description`, `category`, `tags`, `author`, `created`, `updated`, `version`, `compatibility`) |
| ID 일치 | 4점 | `metadata.json`의 `id`와 폴더명 일치 |
| 카테고리 일치 | 4점 | `metadata.json`의 `category`와 상위 폴더명 일치 |
| 날짜 형식 | 2점 | `created`, `updated`가 YYYY-MM-DD 형식 |
| 태그 수 | 2점 | `tags` 배열에 2개 이상 항목 |

**감점 기준:**
- JSON 파싱 실패: 구조 검증 전체 0점 (이후 검증 불가)
- 필수 필드 누락: 누락 1개당 -1점 (최대 -8)
- ID/카테고리 불일치: 각 -4점

### 2단계: 내용 검증 (35점)

프롬프트 본문의 완성도와 명확성을 평가합니다.

| 항목 | 배점 | 검사 내용 |
|------|------|---------|
| 프롬프트 섹션 | 8점 | `## 프롬프트` 섹션 존재 + 코드 블록 내 본문 |
| 본문 길이 | 5점 | 프롬프트 본문 100자 이상 (5점), 50~99자 (3점), 50자 미만 (0점) |
| 컨텍스트 섹션 | 5점 | `## 컨텍스트` 섹션 존재 + 대상/전제 조건/기대 결과 |
| 사용 예시 | 7점 | `## 사용 예시` 섹션 존재 (3점) + 구체적 입력/출력 포함 (4점) |
| 변수 표시 | 5점 | `{변수}` 형식 사용 + 각 변수의 용도 추론 가능 |
| 변형 섹션 | 3점 | `## 변형` 섹션 존재 (선택적이지만 있으면 가점) |
| 출력 형식 지정 | 2점 | 기대 출력 형식이 프롬프트 내에 명시 |

### 3단계: 보안 검증 (25점)

프롬프트가 보안 위험을 포함하거나 유발하지 않는지 검사합니다.

| 항목 | 배점 | 검사 내용 |
|------|------|---------|
| 민감정보 부재 | 10점 | API 키, 비밀번호, 토큰, 개인정보 패턴 미포함 |
| 금지패턴 미유도 | 8점 | `eval()`, `exec()`, SQL 연결 등을 결과물로 유도하지 않음 |
| Injection 방어 | 4점 | 프롬프트 변수가 직접 코드로 실행되지 않는 구조 |
| 하드코딩 부재 | 3점 | IP, 포트, 도메인, 파일 경로 하드코딩 없음 |

**감점 기준:**
- 실제 API 키/비밀번호 발견: -10점 + ❌ FAIL 즉시 표시
- 금지 패턴 유도: 패턴당 -4점
- 하드코딩: 항목당 -1점

### 4단계: 호환성 검증 (15점)

메타데이터의 호환성 정보가 정확한지 검사합니다.

| 항목 | 배점 | 검사 내용 |
|------|------|---------|
| compatibility 정확성 | 7점 | 프롬프트 본문의 도구 사용 여부와 compatibility 필드 일치 |
| tech_stack 명시 | 4점 | 프롬프트에서 참조하는 기술이 tech_stack에 포함 |
| difficulty 적절성 | 2점 | 프롬프트 복잡도와 difficulty 수준 일치 |
| estimated_tokens | 2점 | 프롬프트 실제 길이와 estimated_tokens의 근사치 일치 (±30%) |

**호환성 판단 기준:**
- 파일 조작(Read, Write, Edit), Bash 명령, Glob/Grep 사용 → `claude_code: true, claude_ai: false`
- 순수 텍스트 프롬프트 → `claude_code: true, claude_ai: true`

### 5단계: 결과 출력

```markdown
## 프롬프트 품질 검증 결과

**대상**: {id} ({title})
**경로**: prompts/{category}/{id}/

### 영역별 점수

| 영역 | 점수 | 만점 | 상세 |
|------|------|------|------|
| 구조 검증 | {점수} | 25 | {요약} |
| 내용 검증 | {점수} | 35 | {요약} |
| 보안 검증 | {점수} | 25 | {요약} |
| 호환성 검증 | {점수} | 15 | {요약} |
| **총점** | **{총점}** | **100** | |

### 등급
- 90~100: ⭐ 우수 — 즉시 사용 가능
- 70~89: ✅ 양호 — 사소한 개선 권장
- 50~69: ⚠️ 보통 — 개선 후 재검증 필요
- 0~49: ❌ 미흡 — 대폭 수정 필요

### 감점 상세
(감점된 항목별 원인과 개선 방법)

### 개선 제안
1. {가장 효과적인 개선 사항}
2. {두 번째 개선 사항}
3. ...
```

검증 완료 후 `metadata.json`의 `quality_score` 필드를 총점으로 업데이트합니다.

---

## 합리화 방지

이 스킬의 단계를 건너뛰려는 다음 이유들은 유효하지 않습니다:

- "이미 /prompt-register에서 기본 검증을 통과했으므로 상세 검증이 불필요합니다" → /prompt-register의 5단계는 형식 검증일 뿐, 이 스킬은 내용 품질과 보안을 심층 평가합니다. 관점이 다릅니다.
- "프롬프트가 간단하므로 보안 검증이 불필요합니다" → 간단한 프롬프트에서도 민감정보 유출이나 금지 패턴 유도가 발생할 수 있습니다. 3단계는 항상 수행합니다.

단계를 건너뛸 유일한 방법: 사용자가 명시적으로 해당 단계 생략을 지시
