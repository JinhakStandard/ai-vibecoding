---
name: debug
description: 4단계 체계적 디버깅 — 근본 원인 추적 후 검증된 수정 적용
---

버그를 체계적으로 추적하여 근본 원인을 찾고, 검증된 수정을 적용합니다.

## 인자
$ARGUMENTS - 버그 증상 또는 에러 메시지 (필수)

## 사용법
```
/debug "로그인 시 500 에러 발생"
/debug "대시보드 데이터가 빈 배열로 표시됨"
```

## 언제 사용하는가

| 적합 | 부적합 |
|------|--------|
| 원인이 불분명한 버그 | 오타/단순 문법 에러 |
| 재현 가능한 이슈 | 환경 설정 문제 (환경 문서 참조) |
| 2회 이상 수정 시도 실패한 버그 | 기능 요청/개선 |

---

## 실행 절차 (4단계, 순서 엄수)

### Phase 1: 증상 수집 (Observe)
1. 에러 메시지/로그 전문 수집
2. 재현 조건 확인 (입력값, 환경, 순서)
3. "언제부터 발생했는가?" → 최근 변경사항(`git log`) 확인
4. 정상 동작과 비정상 동작의 차이점 정리

**Phase 1 완료 조건**: 재현 가능한 증상 + 관련 코드 범위 식별

### Phase 2: 경계 추적 (Trace)
1. 데이터 흐름의 각 경계(컴포넌트 간, API 간)에서:
   - 입력 데이터 로깅
   - 출력 데이터 로깅
   - 상태/설정 확인
2. **1회만 실행**하여 증거 수집
3. 증거를 분석하여 "어디서 깨지는가" 특정

**Phase 2 완료 조건**: 문제가 발생하는 정확한 위치(파일/함수/라인) 특정

### Phase 3: 근본 원인 확인 (Diagnose)
1. 특정된 위치에서 **왜** 문제가 발생하는지 분석
2. 증상이 아닌 **원인**을 설명할 수 있어야 함
3. 원인을 설명하는 가설 수립 → 가설을 검증할 수 있는 최소 테스트 작성

**Phase 3 완료 조건**: "X 때문에 Y가 발생한다"를 검증 가능한 형태로 설명

### Phase 4: 검증된 수정 (Fix + Verify)
1. 근본 원인에 대한 최소한의 수정 적용
2. Red-Green 검증 수행 (`/test` 스킬의 6단계 참조)
3. 기존 테스트 전체 실행 → 회귀 없음 확인

**Phase 4 완료 조건**: Red-Green 검증 통과 + 기존 테스트 전체 통과

---

## 안전 장치

**3회 수정 실패 시 STOP:**
- Phase 1로 돌아가 증상 재수집
- 아키텍처 수준 문제가 아닌지 재검토
- 사용자에게 상황 보고 + 아키텍처 논의 제안

**절대 하지 않을 것:**
- 추측 기반 수정 → 반드시 Phase 1~3을 거친 후 수정
- 여러 수정을 동시에 적용 → 한 번에 하나의 수정만
- "증상은 해결됐지만 원인은 모르겠다" → 근본 원인 미확인 시 Phase 3 반복

---

## 합리화 방지

이 스킬의 단계를 건너뛰려는 다음 이유들은 유효하지 않습니다:

- "원인이 명확하므로 Phase 1~2를 건너뛰겠습니다" → 명확해 보이는 원인이 실제 원인이 아닌 경우가 많습니다. 증상 수집은 생략하지 않습니다.
- "시간 절약을 위해 여러 수정을 동시에 적용합니다" → 동시 수정 시 어떤 수정이 효과적이었는지 판단 불가. 한 번에 하나만 적용합니다.

단계를 건너뛸 유일한 방법: 사용자가 명시적으로 "Phase N 건너뛰어" 지시
