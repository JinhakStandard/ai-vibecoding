---
name: test
description: 프로젝트 테스트를 실행하고 결과를 분석
---

프로젝트의 테스트를 실행하고 결과를 분석합니다.

## 인자
$ARGUMENTS - 테스트 대상 (선택사항). 파일명, 컴포넌트명, 또는 옵션 (--coverage)

## 사용법
```
/test              # 전체 테스트 실행
/test UserCard     # 특정 파일/컴포넌트 테스트
/test --coverage   # 커버리지 포함 실행
```

## 실행 절차

### 1단계: 테스트 환경 확인
1. `package.json`에서 테스트 스크립트 확인 (`test`, `test:unit`, `test:e2e` 등)
2. 테스트 프레임워크 파악 (Vitest, Jest 등)
3. 테스트 설정 파일 확인 (`vitest.config.ts`, `jest.config.ts` 등)

### 2단계: 테스트 실행
- 인자 없이 호출 시: `pnpm test` 또는 `npm test` 실행
- 특정 파일 지정 시: 해당 파일/패턴만 테스트
- `--coverage` 지정 시: 커버리지 리포트 포함

> **Agent Teams 활용**: 대규모 테스트 스위트에서 독립적인 테스트 그룹(유닛/통합/E2E)을 병렬로 분석할 때 서브에이전트를 활용할 수 있습니다.

### 3단계: 타입 체크
- TypeScript 프로젝트인 경우 `npx tsc --noEmit`으로 타입 체크 실행

### 4단계: 결과 분석 및 보고

```markdown
## 테스트 결과

### 요약
- 전체: N개 | 성공: N개 | 실패: N개 | 건너뜀: N개

### 타입 체크
- 에러: N개

### 실패한 테스트 (있는 경우)
1. **테스트명**
   - 파일: `경로`
   - 원인: 분석 내용
   - 수정 제안: 구체적인 수정 방법

### 커버리지 (--coverage 사용 시)
| 항목 | 비율 |
|------|------|
| Statements | N% |
| Branches | N% |
| Functions | N% |
| Lines | N% |
```

### 5단계: 실패 시 대응
- 코드 버그로 인한 실패: 코드 수정 제안
- 테스트 자체의 문제: 테스트 수정 제안
- 환경 문제: 환경 설정 해결 방안 제시

### 6단계: Red-Green 검증 (버그 수정 시 필수)

버그 수정 후 회귀 테스트를 작성할 때, 다음 Red-Green 검증을 반드시 수행:

1. 수정된 코드 + 새 테스트 → 실행 → **통과 확인** (Green)
2. 수정을 되돌리기 (git stash 또는 수동)
3. 되돌린 코드 + 새 테스트 → 실행 → **반드시 실패 확인** (Red)
4. 수정을 복원 (git stash pop 또는 수동)
5. 최종 확인 → **통과 확인** (Green)

이 절차를 거치지 않으면 테스트가 실제로 해당 버그를 검출하는지 보장할 수 없습니다.

**허용/금지 패턴:**
- 금지: "회귀 테스트를 작성했습니다" (Red-Green 검증 없이)
- 금지: "테스트가 통과합니다" (Green만 확인, Red 미확인)
- 허용: "테스트 작성 → 통과 → 수정 되돌리기 → 실패 확인 → 복원 → 통과 확인 완료"

## 합리화 방지

이 스킬의 단계를 건너뛰려는 다음 이유들은 유효하지 않습니다:

- "이 변경은 단순해서 Red-Green 검증이 불필요합니다" → 단순한 변경도 회귀 테스트의 유효성은 검증해야 합니다
- "시간 절약을 위해 Red 확인을 생략합니다" → Red 미확인 시 테스트가 항상 통과하는 무의미한 테스트일 수 있습니다

단계를 건너뛸 유일한 방법: 사용자가 명시적으로 "Red-Green 검증 건너뛰어" 지시

---

## 테스트 작성 기준 (참고)
- 테스트 파일은 원본 파일과 같은 위치에 `.test.` 확장자로 생성
- 테스트 설명은 한국어로 작성
- 필수: 비즈니스 로직 (스토어 액션, 유틸리티 함수)
- 권장: 복잡한 인터랙션 컴포넌트
- 선택: 순수 UI 표시 컴포넌트
